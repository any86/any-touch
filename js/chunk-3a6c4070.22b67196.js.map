{"version":3,"sources":["webpack:///./src/views/Topology.vue?89ba","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/count.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/each.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sum.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sort.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/path.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/ancestors.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/descendants.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/leaves.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/links.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/index.js","webpack:///./node_modules/d3-hierarchy/src/tree.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/d3-shape/src/link/index.js","webpack:///./src/views/utils.js","webpack:///src/views/Topology.vue","webpack:///./src/views/Topology.vue?c902","webpack:///./src/views/Topology.vue","webpack:///./src/views/Topology.vue?66f4","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","_m","staticStyle","attrs","_l","linkPath","index","key","staticClass","_e","node","_obj","directives","name","rawName","value","hidden","expression","class","action","activeNode","itemWidth","itemHeight","y","x","on","$event","onPanstart","onPanmove","onPanend","onTap","_v","_s","depth","staticRenderFns","_arrayWithHoles","arr","Array","isArray","_iterableToArray","iter","Symbol","iterator","Object","prototype","toString","call","from","_nonIterableRest","TypeError","_toArray","arrayWithHoles","iterableToArray","nonIterableRest","_iterableToArrayLimit","i","_arr","_n","_d","undefined","_i","next","done","push","length","err","_slicedToArray","iterableToArrayLimit","count","sum","children","eachAfter","current","n","reverse","pop","callback","nodes","data","eachBefore","sort","compare","start","ancestor","leastCommonAncestor","end","parent","k","splice","a","b","aNodes","ancestors","bNodes","c","each","leaves","root","links","source","target","hierarchy","child","childs","Node","valued","defaultChildren","computeHeight","node_copy","copyData","d","height","defaultSeparation","nextLeft","v","t","nextRight","moveSubtree","wm","wp","shift","change","s","z","m","executeShifts","w","nextAncestor","vim","TreeNode","_","A","treeRoot","tree","constructor","path","descendants","copy","create","separation","dx","dy","nodeSize","firstWalk","secondWalk","sizeNode","left","right","bottom","tx","kx","ky","siblings","midpoint","apportion","vip","vop","vom","sip","sop","sim","som","arguments","size","pi","Math","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","r","x0","y0","x21","y21","x01","y01","l01_2","Error","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","sin","cw","da","rect","h","slice","p","linkSource","linkTarget","curve","context","link","buffer","argv","apply","constant","curveHorizontal","linkHorizontal","dataset","easeInOut","Date","now","animate","to","duration","startTime","window","performance","run","timeDiff","requestAnimationFrame","component","$","isObject","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","SPECIES","nativeSlice","max","proto","forced","Constructor","result","O","fin"],"mappings":"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","file":"js/chunk-3a6c4070.22b67196.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',[_vm._m(0),_c('svg',{staticStyle:{\"width\":\"100%\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1000\",\"height\":\"1000\"}},[_c('g',{attrs:{\"transform\":\"translate(100, 100)\"}},[_vm._l((_vm.linkPaths),function(linkPath,index){return [(linkPath)?_c('path',{key:index,staticClass:\"line\",attrs:{\"d\":linkPath}}):_vm._e()]})],2),_c('g',{attrs:{\"transform\":\"translate(100, 100)\"}},_vm._l((_vm.nodes),function(node,index){\nvar _obj;\nreturn _c('foreignObject',{directives:[{name:\"show\",rawName:\"v-show\",value:(!node.hidden),expression:\"!node.hidden\"}],key:'foreignObject'+index,class:( _obj = {}, _obj[(\"at-\" + _vm.action)] = _vm.activeNode===node, _obj ),attrs:{\"width\":_vm.itemWidth,\"height\":_vm.itemHeight,\"x\":node.y - _vm.itemWidth/2,\"y\":node.x - _vm.itemHeight/2},on:{\"panstart\":function($event){return _vm.onPanstart(index,$event)},\"panmove\":function($event){return _vm.onPanmove(index,$event)},\"panend\":_vm.onPanend,\"pancancel\":_vm.onPanend,\"tap\":function($event){return _vm.onTap(index)}}},[_c('body',{attrs:{\"xmlns\":\"http://www.w3.org/1999/xhtml\"}},[_c('div',{staticClass:\"text\"},[_c('p',[_vm._v(\"节点层级: \"+_vm._s(node.depth))]),_c('p',[_vm._v(\"节点顺序: \"+_vm._s(index))])])])])}),1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',[_vm._v(\" 实现基于 \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/d3/d3\"}},[_vm._v(\"d3\")]),_vm._v(\" / \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/vuejs/vue\"}},[_vm._v(\"vue\")]),_vm._v(\" / \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/any86/any-touch\"}},[_vm._v(\"any-touch\")])])}]\n\nexport { render, staticRenderFns }","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || nonIterableRest();\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.’s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"../array.js\";\nimport constant from \"../constant.js\";\nimport {x as pointX, y as pointY} from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export const dataset = {\r\n    \"name\": \"顶级\",\r\n    value: 99,\r\n    \"children\": [{\r\n        \"name\": \"第2级\",\r\n        value: 21,\r\n        \"children\": [{\r\n            \"name\": \"第3级A\",\r\n            value: 14,\r\n            \"children\": [{\r\n                \"name\": \"第4级A\",\r\n                \"value\": 3938\r\n            }, {\r\n                \"name\": \"第4级B\",\r\n                \"value\": 1112\r\n            },]\r\n        },]\r\n    }]\r\n}\r\n\r\n\r\n// https://blog.csdn.net/qq_34414916/article/details/80026029\r\n// https://www.jianshu.com/p/64305821087a\r\n// https://github.com/d3/d3-shape/blob/master/src/curve/monotone.js\r\n\r\nfunction easeInOut(t, b, c, d) {\r\n    if ((t /= d / 2) < 1) return c / 2 * t * t + b;\r\n    return -c / 2 * ((--t) * (t - 2) - 1) + b;\r\n}\r\nfunction linear(t, b, c, d) {\r\n    return c * t / d + b;\r\n}\r\nconst { now } = Date;\r\nexport function animate(from = 0, to = 0, duration = 1000, callback = () => void 0) {\r\n    const startTime = window.performance.now();\r\n    function run() {\r\n        const timeDiff = window.performance.now() - startTime;\r\n        const value = easeInOut(timeDiff, from, to - from, duration);\r\n        if (timeDiff <= duration) {\r\n            callback(value);\r\n            requestAnimationFrame(run);\r\n        } else {\r\n            // 修正超出边界\r\n            callback(to, true);\r\n        }\r\n    }\r\n    run();\r\n};\r\n\r\n\r\n\r\nexport function canvas(canvas) {\r\n    const pointsGroup = [];\r\n    const context = canvas.getContext('2d');\r\n    context.strokeStyle = '#f60';\r\n    context.moveTo(0, 0);\r\n    context.lineTo(300, 300);\r\n    context.stroke();\r\n}\r\n\r\n\r\nfunction drawLine(context) {\r\n    context.beginPath();\r\n    context.moveTo(0, 0);\r\n    context.lineTo(300, 300);\r\n    context.stroke();\r\n    context.closePath();\r\n}","<template>\r\n<article>\r\n    <header>\r\n        实现基于\r\n        <a target=\"_new\" href=\"https://github.com/d3/d3\">d3</a> /\r\n        <a target=\"_new\" href=\"https://github.com/vuejs/vue\">vue</a> /\r\n        <a target=\"_new\" href=\"https://github.com/any86/any-touch\">any-touch</a>\r\n    </header>\r\n\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1000\" height=\"1000\" style=\"width:100%;\">\r\n        <g transform=\"translate(100, 100)\">\r\n            <template v-for=\"(linkPath, index) in linkPaths\">\r\n                <path v-if=\"linkPath\" :key=\"index\" :d=\"linkPath\" class=\"line\" />\r\n            </template>\r\n        </g>\r\n\r\n        <g transform=\"translate(100, 100)\">\r\n            <foreignObject\r\n                v-for=\"(node,index) in nodes\"\r\n                v-show=\"!node.hidden\"\r\n                :class=\"{[`at-${action}`]:activeNode===node}\"\r\n                :key=\"'foreignObject'+index\"\r\n                :width=\"itemWidth\"\r\n                :height=\"itemHeight\"\r\n                :x=\"node.y - itemWidth/2\"\r\n                :y=\"node.x - itemHeight/2\"\r\n                @panstart=\"onPanstart(index,$event)\"\r\n                @panmove=\"onPanmove(index,$event)\"\r\n                @panend=\"onPanend\"\r\n                @pancancel=\"onPanend\"\r\n                @tap=\"onTap(index)\"\r\n            >\r\n                <body xmlns=\"http://www.w3.org/1999/xhtml\">\r\n                    <div class=\"text\">\r\n                        <p>节点层级: {{node.depth}}</p>\r\n                        <p>节点顺序: {{index}}</p>\r\n                    </div>\r\n                </body>\r\n            </foreignObject>\r\n        </g>\r\n    </svg>\r\n</article>\r\n</template>\r\n\r\n<script>\r\n// import * as d3 from 'd3';\r\n// import Core from '../../../packages/core/dist/index.es.js';\r\n// import Pan from '../../../packages/pan/dist/index.es.js';\r\n// Core.use(Pan, { threshold: 0 });\r\nimport {hierarchy, tree} from 'd3-hierarchy'\r\nimport {linkHorizontal} from 'd3-shape'\r\nimport AnyTouch from '../../../packages/any-touch/dist/any-touch.umd';\r\nimport { dataset, animate } from './utils';\r\n// console.log({hierarchy, tree,linkHorizontal,AnyTouch,dataset,animate})\r\nconst pointsGroup = [];\r\nconst paths = [];\r\nexport default {\r\n    name: 'Topology',\r\n\r\n    props: {\r\n        itemWidth: {\r\n            type: Number,\r\n            default: 160\r\n        },\r\n        itemHeight: {\r\n            type: Number,\r\n            default: 100\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            nodes: [],\r\n            linkPaths: [],\r\n            tree: {},\r\n            activeNode: null,\r\n            action: ''\r\n        };\r\n    },\r\n    mounted() {\r\n        this.renderTree();\r\n        const at = AnyTouch(this.$el);\r\n        this.$on('hook:destroy', at.destroy);\r\n    },\r\n    methods: {\r\n        /**\r\n         * 把普通树形变成d3需要的树形\r\n         */\r\n        genTreeData(data) {\r\n            const width = 1000;\r\n            const height = 1000;\r\n            // hierarchy把普通的树形数据变成d3的tree结构,\r\n            // 这样tree就有了d3的方法, 可以通过方法获取子节点(tree.descendants)/父节点/节点数等信息\r\n            const root = hierarchy(data);\r\n            // 遍历子节点,descendants是后代的意思,\r\n            // 但是其实也会包含当前节点本身.\r\n            // 给节点增加hidden字段用来控制当前节点显示/隐藏.\r\n            root.descendants().forEach((node) => {\r\n                node.hidden = false;\r\n            });\r\n            // d3.tree运行后会返回一个函数,\r\n            // 通过函数可以设置图形的一些尺寸(nodeSize)/位置间距(separation)信息\r\n            // 这样在返回的函数中传入刚才输入的d3.tree结构数据, 比如上面的root,\r\n            // 那么拓扑所需的数据就都全了.\r\n            return (\r\n                tree()\r\n                    .separation(function(a, b) {\r\n                        // 同级元素调整间隙比例\r\n                        // 一般就用2:1就好\r\n                        return (a.parent == b.parent ? 2 : 1) / a.depth;\r\n                    })\r\n                    // 节点尺寸\r\n                    .nodeSize([110, width / (root.height + 1)])(root)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * 生成节点数组 => [Node, Node]\r\n         * 用来给模板渲染元素\r\n         */\r\n        updateNodes() {\r\n            this.nodes = this.tree.descendants();\r\n        },\r\n\r\n        /**\r\n         * 生成线\r\n         */\r\n        updateLinks() {\r\n            // tree.links会根据节点数据生成连线数据\r\n            this.linkPaths = this.tree.links().map((link) => {\r\n                // d.linkHorizontal和上面的d3.tree一样,\r\n                // 可以当做构造函数,\r\n                // 其返回一个函数\r\n                // 可以用函数上的x/y方法指定\r\n                // 由于默认生成tree数据是上下结构的拓扑数据,\r\n                // 所以为了生成左至右的线需要把X/Y数据颠倒\r\n                // 最终生成线数据结构类似这样:{source:{},target:{}}\r\n                if (!link.target.hidden) {\r\n                    return linkHorizontal()\r\n                        .x((d) => d.y)\r\n                        .y((d) => d.x)(link);\r\n                }\r\n            });\r\n        },\r\n        /**\r\n         * 生成所需数据\r\n         */\r\n        renderTree() {\r\n            this.tree = this.genTreeData(dataset);\r\n            this.updateLinks();\r\n            this.updateNodes();\r\n        },\r\n\r\n        /**\r\n         * 拖拽开始, 记录当前节点\r\n         */\r\n        onPanstart(index, e) {\r\n            const [item] = this.nodes.splice(index, 1);\r\n            this.nodes.push(item);\r\n            this.activeNode = item;\r\n        },\r\n\r\n        /**\r\n         * 拖拽中\r\n         * 变化节点坐标\r\n         * 重新生成连线数据\r\n         */\r\n        onPanmove(index, e) {\r\n            this.action = e.type;\r\n            const { deltaX, deltaY } = e;\r\n            const { length } = this.nodes;\r\n            this.activeNode.x += deltaY;\r\n            this.activeNode.y += deltaX;\r\n            this.updateLinks();\r\n        },\r\n\r\n        /**\r\n         * 取消当前节点激活\r\n         */\r\n        onPanend() {\r\n            this.activeNode = null;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        onTap(index) {\r\n            this.activeNode = this.nodes[index];\r\n            // 当前节点记录是否收起/展开\r\n            if (void 0 === this.activeNode.collapse) {\r\n                this.$set(this.activeNode, 'collapse', true);\r\n            } else {\r\n                this.activeNode.collapse = !this.activeNode.collapse;\r\n            }\r\n            const { x, y, collapse } = this.activeNode;\r\n            // descendants返回的子节点包含自己, 所以排除自己\r\n            const [a, ...childNodes] = this.activeNode.descendants();\r\n            // 根据节点折叠状态来展开/折叠子节点显示\r\n            childNodes.forEach((node) => {\r\n                if (collapse) {\r\n                    const x1 = node.x;\r\n                    const y1 = node.y;\r\n                    // 存储展开时候的位置,\r\n                    // 下次复原位置用\r\n                    node._x = x1;\r\n                    node._y = y1;\r\n                    animate(1, 0, 200, (value, isDone) => {\r\n                        node.x = x - (x - x1) * value;\r\n                        node.y = y - (y - y1) * value;\r\n                        if (isDone) {\r\n                            node.hidden = true;\r\n                        }\r\n                        this.updateLinks();\r\n                    });\r\n                } else {\r\n                    node.hidden = false;\r\n                    // 此处让value从0 - 1在200ms内不停变化\r\n                    // 从而让节点位置变化实现展开收缩动画\r\n                    animate(0, 1, 200, (value) => {\r\n                        node.x = x + (node._x - x) * value;\r\n                        node.y = y + (node._y - y) * value;\r\n                        this.updateLinks();\r\n                    });\r\n                }\r\n            });\r\n\r\n            // this.updateNodes();\r\n            // this.updateLinks();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scope lang=\"scss\">\r\nheader {\r\n    position: sticky;\r\n    width: 100%;\r\n    top: 0;\r\n    left: 0;\r\n    padding: 16px;\r\n    box-shadow:1px 2px 8px rgba(0,0,0,.1);\r\n    a {\r\n        color: #69c;\r\n    }\r\n}\r\n.line {\r\n    fill: none;\r\n    stroke: rgb(3, 159, 107);\r\n    stroke-width: 1;\r\n}\r\n.circle {\r\n    fill: rgb(3, 159, 107);\r\n}\r\n\r\n.text {\r\n    background-color: rgb(3, 159, 107);\r\n    margin: 8px;\r\n    width: 90%;\r\n    padding: 8px;\r\n    text-align: center;\r\n    color: #fff;\r\n    box-shadow: 1px 2px 8px rgba(4, 108, 73, 0.5);\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n}\r\n\r\nforeignObject.at-panmove .text {\r\n    cursor: move;\r\n\r\n    background-color: rgb(3, 159, 107, 0.7);\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Topology.vue?vue&type=template&id=1b4a593b&\"\nimport script from \"./Topology.vue?vue&type=script&lang=js&\"\nexport * from \"./Topology.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}