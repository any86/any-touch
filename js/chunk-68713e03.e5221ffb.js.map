{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./src/views/Topology.vue?6e1a","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/count.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/each.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sum.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sort.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/path.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/ancestors.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/descendants.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/leaves.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/links.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/index.js","webpack:///./node_modules/d3-hierarchy/src/tree.js","webpack:///./node_modules/d3-path/src/path.js","webpack:///./node_modules/d3-shape/src/array.js","webpack:///./node_modules/d3-shape/src/constant.js","webpack:///./node_modules/d3-shape/src/point.js","webpack:///./node_modules/d3-shape/src/link/index.js","webpack:///./src/views/utils.js","webpack:///src/views/Topology.vue","webpack:///./src/views/Topology.vue?c902","webpack:///./src/views/Topology.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./src/views/Topology.vue?66f4","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["_arrayWithHoles","arr","Array","isArray","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","render","_vm","this","_h","$createElement","_c","_self","_m","staticStyle","attrs","_l","linkPath","index","key","staticClass","_e","node","_obj","directives","name","rawName","value","hidden","expression","class","action","activeNode","itemWidth","itemHeight","y","x","on","$event","onPanstart","onPanmove","onPanend","onTap","_v","_s","depth","staticRenderFns","_iterableToArray","iter","Symbol","iterator","Object","toString","call","from","_toArray","arrayWithHoles","iterableToArray","nonIterableRest","count","sum","children","i","length","eachAfter","current","n","next","reverse","pop","callback","push","nodes","data","eachBefore","sort","compare","start","ancestor","leastCommonAncestor","end","parent","k","splice","a","b","aNodes","ancestors","bNodes","c","each","leaves","root","links","source","target","hierarchy","child","childs","Node","valued","defaultChildren","computeHeight","node_copy","copyData","d","height","defaultSeparation","nextLeft","v","t","nextRight","moveSubtree","wm","wp","shift","change","s","z","m","executeShifts","w","nextAncestor","vim","TreeNode","_","A","treeRoot","tree","constructor","path","descendants","copy","create","separation","dx","dy","nodeSize","firstWalk","secondWalk","sizeNode","left","right","bottom","tx","kx","ky","siblings","midpoint","apportion","vip","vop","vom","sip","sop","sim","som","arguments","size","pi","Math","PI","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","y2","arcTo","r","x0","y0","x21","y21","x01","y01","l01_2","Error","abs","x20","y20","l21_2","l20_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","cos","sin","cw","da","rect","h","slice","p","linkSource","linkTarget","curve","context","link","buffer","argv","apply","constant","curveHorizontal","linkHorizontal","dataset","easeInOut","Date","now","animate","to","duration","startTime","window","performance","run","timeDiff","requestAnimationFrame","component","_iterableToArrayLimit","_arr","_n","_d","undefined","_i","done","err","_slicedToArray","iterableToArrayLimit","_nonIterableRest","TypeError","$","isObject","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","SPECIES","nativeSlice","max","proto","forced","Constructor","result","O","fin"],"mappings":"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","file":"js/chunk-68713e03.e5221ffb.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',[_vm._m(0),_c('svg',{staticStyle:{\"width\":\"100%\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1000\",\"height\":\"1000\"}},[_c('g',{attrs:{\"transform\":\"translate(100, 100)\"}},[_vm._l((_vm.linkPaths),function(linkPath,index){return [(linkPath)?_c('path',{key:index,staticClass:\"line\",attrs:{\"d\":linkPath}}):_vm._e()]})],2),_c('g',{attrs:{\"transform\":\"translate(100, 100)\"}},_vm._l((_vm.nodes),function(node,index){\nvar _obj;\nreturn _c('foreignObject',{directives:[{name:\"show\",rawName:\"v-show\",value:(!node.hidden),expression:\"!node.hidden\"}],key:'foreignObject'+index,class:( _obj = {}, _obj[(\"at-\" + _vm.action)] = _vm.activeNode===node, _obj ),attrs:{\"width\":_vm.itemWidth,\"height\":_vm.itemHeight,\"x\":node.y - _vm.itemWidth/2,\"y\":node.x - _vm.itemHeight/2},on:{\"panstart\":function($event){return _vm.onPanstart(index,$event)},\"panmove\":function($event){return _vm.onPanmove(index,$event)},\"panend\":_vm.onPanend,\"pancancel\":_vm.onPanend,\"tap\":function($event){return _vm.onTap(index)}}},[_c('body',{attrs:{\"xmlns\":\"http://www.w3.org/1999/xhtml\"}},[_c('div',{staticClass:\"text\"},[_c('p',[_vm._v(_vm._s(node.hidden)+\" 节点层级: \"+_vm._s(node.depth))]),_c('p',[_vm._v(\"节点顺序: \"+_vm._s(index))])])])])}),1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',[_vm._v(\" 实现基于 \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/d3/d3\"}},[_vm._v(\"d3\")]),_vm._v(\" / \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/vuejs/vue\"}},[_vm._v(\"vue\")]),_vm._v(\" / \"),_c('a',{attrs:{\"target\":\"_new\",\"href\":\"https://github.com/any86/any-touch\"}},[_vm._v(\"any-touch\")])])}]\n\nexport { render, staticRenderFns }","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || nonIterableRest();\n}","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.’s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export var slice = Array.prototype.slice;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport {slice} from \"../array.js\";\nimport constant from \"../constant.js\";\nimport {x as pointX, y as pointY} from \"../point.js\";\nimport pointRadial from \"../pointRadial.js\";\n\nfunction linkSource(d) {\n  return d.source;\n}\n\nfunction linkTarget(d) {\n  return d.target;\n}\n\nfunction link(curve) {\n  var source = linkSource,\n      target = linkTarget,\n      x = pointX,\n      y = pointY,\n      context = null;\n\n  function link() {\n    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);\n    if (!context) context = buffer = path();\n    curve(context, +x.apply(this, (argv[0] = s, argv)), +y.apply(this, argv), +x.apply(this, (argv[0] = t, argv)), +y.apply(this, argv));\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  link.source = function(_) {\n    return arguments.length ? (source = _, link) : source;\n  };\n\n  link.target = function(_) {\n    return arguments.length ? (target = _, link) : target;\n  };\n\n  link.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), link) : x;\n  };\n\n  link.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), link) : y;\n  };\n\n  link.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), link) : context;\n  };\n\n  return link;\n}\n\nfunction curveHorizontal(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);\n}\n\nfunction curveVertical(context, x0, y0, x1, y1) {\n  context.moveTo(x0, y0);\n  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);\n}\n\nfunction curveRadial(context, x0, y0, x1, y1) {\n  var p0 = pointRadial(x0, y0),\n      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),\n      p2 = pointRadial(x1, y0),\n      p3 = pointRadial(x1, y1);\n  context.moveTo(p0[0], p0[1]);\n  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);\n}\n\nexport function linkHorizontal() {\n  return link(curveHorizontal);\n}\n\nexport function linkVertical() {\n  return link(curveVertical);\n}\n\nexport function linkRadial() {\n  var l = link(curveRadial);\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n  return l;\n}\n","export const dataset = {\n    \"name\": \"顶级\",\n    value: 99,\n    \"children\": [{\n        \"name\": \"第2级\",\n        value: 21,\n        \"children\": [{\n            \"name\": \"第3级A\",\n            value: 14,\n            \"children\": [{\n                \"name\": \"第4级A\",\n                \"value\": 3938\n            }, {\n                \"name\": \"第4级B\",\n                \"value\": 1112\n            },]\n        },]\n    }]\n}\n\n\n// https://blog.csdn.net/qq_34414916/article/details/80026029\n// https://www.jianshu.com/p/64305821087a\n// https://github.com/d3/d3-shape/blob/master/src/curve/monotone.js\n\nfunction easeInOut(t, b, c, d) {\n    if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n    return -c / 2 * ((--t) * (t - 2) - 1) + b;\n}\nfunction linear(t, b, c, d) {\n    return c * t / d + b;\n}\nconst { now } = Date;\nexport function animate(from = 0, to = 0, duration = 1000, callback = () => void 0) {\n    const startTime = window.performance.now();\n    function run() {\n        const timeDiff = window.performance.now() - startTime;\n        const value = easeInOut(timeDiff, from, to - from, duration);\n        if (timeDiff <= duration) {\n            callback(value);\n            requestAnimationFrame(run);\n        } else {\n            // 修正超出边界\n            callback(to, true);\n        }\n    }\n    run();\n};\n\n\n\nexport function canvas(canvas) {\n    const pointsGroup = [];\n    const context = canvas.getContext('2d');\n    context.strokeStyle = '#f60';\n    context.moveTo(0, 0);\n    context.lineTo(300, 300);\n    context.stroke();\n}\n\n\nfunction drawLine(context) {\n    context.beginPath();\n    context.moveTo(0, 0);\n    context.lineTo(300, 300);\n    context.stroke();\n    context.closePath();\n}","<template>\n<article>\n    <header>\n        实现基于\n        <a target=\"_new\" href=\"https://github.com/d3/d3\">d3</a> /\n        <a target=\"_new\" href=\"https://github.com/vuejs/vue\">vue</a> /\n        <a target=\"_new\" href=\"https://github.com/any86/any-touch\">any-touch</a>\n    </header>\n\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1000\" height=\"1000\" style=\"width:100%;\">\n        <g transform=\"translate(100, 100)\">\n            <template v-for=\"(linkPath, index) in linkPaths\">\n                <path v-if=\"linkPath\" :key=\"index\" :d=\"linkPath\" class=\"line\" />\n            </template>\n        </g>\n\n        <g transform=\"translate(100, 100)\">\n            <foreignObject\n                v-for=\"(node,index) in nodes\"\n                v-show=\"!node.hidden\"\n                :class=\"{[`at-${action}`]:activeNode===node}\"\n                :key=\"'foreignObject'+index\"\n                :width=\"itemWidth\"\n                :height=\"itemHeight\"\n                :x=\"node.y - itemWidth/2\"\n                :y=\"node.x - itemHeight/2\"\n                @panstart=\"onPanstart(index,$event)\"\n                @panmove=\"onPanmove(index,$event)\"\n                @panend=\"onPanend\"\n                @pancancel=\"onPanend\"\n                @tap=\"onTap(index)\"\n            >\n                <body xmlns=\"http://www.w3.org/1999/xhtml\">\n                    <div class=\"text\">\n                        <p>{{node.hidden}} 节点层级: {{node.depth}}</p>\n                        <p>节点顺序: {{index}}</p>\n                    </div>\n                </body>\n            </foreignObject>\n        </g>\n    </svg>\n</article>\n</template>\n\n<script>\n// import * as d3 from 'd3';\n// import Core from '../../../packages/core/dist/index.es.js';\n// import Pan from '../../../packages/pan/dist/index.es.js';\n// Core.use(Pan, { threshold: 0 });\nimport {hierarchy, tree} from 'd3-hierarchy'\nimport {linkHorizontal} from 'd3-shape'\nimport AnyTouch from '../../../packages/any-touch/dist/any-touch.umd';\nimport { dataset, animate } from './utils';\n// console.log({hierarchy, tree,linkHorizontal,AnyTouch,dataset,animate})\nconst pointsGroup = [];\nconst paths = [];\nexport default {\n    name: 'Topology',\n\n    props: {\n        itemWidth: {\n            type: Number,\n            default: 160\n        },\n        itemHeight: {\n            type: Number,\n            default: 100\n        }\n    },\n\n    data() {\n        return {\n            nodes: [],\n            linkPaths: [],\n            tree: {},\n            activeNode: null,\n            action: ''\n        };\n    },\n    mounted() {\n        this.renderTree();\n        const at = new AnyTouch(this.$el);\n        this.$on('hook:destroy', at.destroy);\n    },\n    methods: {\n        /**\n         * 把普通树形变成d3需要的树形\n         */\n        genTreeData(data) {\n            const width = 1000;\n            const height = 1000;\n            // hierarchy把普通的树形数据变成d3的tree结构,\n            // 这样tree就有了d3的方法, 可以通过方法获取子节点(tree.descendants)/父节点/节点数等信息\n            const root = hierarchy(data);\n            // 遍历子节点,descendants是后代的意思,\n            // 但是其实也会包含当前节点本身.\n            // 给节点增加hidden字段用来控制当前节点显示/隐藏.\n            root.descendants().forEach((node) => {\n                node.hidden = false;\n            });\n            // d3.tree运行后会返回一个函数,\n            // 通过函数可以设置图形的一些尺寸(nodeSize)/位置间距(separation)信息\n            // 这样在返回的函数中传入刚才输入的d3.tree结构数据, 比如上面的root,\n            // 那么拓扑所需的数据就都全了.\n            return (\n                tree()\n                    .separation(function(a, b) {\n                        // 同级元素调整间隙比例\n                        // 一般就用2:1就好\n                        return (a.parent == b.parent ? 2 : 1) / a.depth;\n                    })\n                    // 节点尺寸\n                    .nodeSize([110, width / (root.height + 1)])(root)\n            );\n        },\n\n        /**\n         * 生成节点数组 => [Node, Node]\n         * 用来给模板渲染元素\n         */\n        updateNodes() {\n            this.nodes = this.tree.descendants();\n        },\n\n        /**\n         * 生成线\n         */\n        updateLinks() {\n            // tree.links会根据节点数据生成连线数据\n            this.linkPaths = this.tree.links().map((link) => {\n                // d.linkHorizontal和上面的d3.tree一样,\n                // 可以当做构造函数,\n                // 其返回一个函数\n                // 可以用函数上的x/y方法指定\n                // 由于默认生成tree数据是上下结构的拓扑数据,\n                // 所以为了生成左至右的线需要把X/Y数据颠倒\n                // 最终生成线数据结构类似这样:{source:{},target:{}}\n                if (!link.target.hidden) {\n                    return linkHorizontal()\n                        .x((d) => d.y)\n                        .y((d) => d.x)(link);\n                }\n            });\n        },\n        /**\n         * 生成所需数据\n         */\n        renderTree() {\n            this.tree = this.genTreeData(dataset);\n            this.updateLinks();\n            this.updateNodes();\n        },\n\n        /**\n         * 拖拽开始, 记录当前节点\n         */\n        onPanstart(index, e) {\n            const [item] = this.nodes.splice(index, 1);\n            this.nodes.push(item);\n            this.activeNode = item;\n        },\n\n        /**\n         * 拖拽中\n         * 变化节点坐标\n         * 重新生成连线数据\n         */\n        onPanmove(index, e) {\n            this.action = e.type;\n            const { deltaX, deltaY } = e;\n            const { length } = this.nodes;\n            this.activeNode.x += deltaY;\n            this.activeNode.y += deltaX;\n            this.updateLinks();\n        },\n\n        /**\n         * 取消当前节点激活\n         */\n        onPanend() {\n            this.activeNode = null;\n        },\n\n        /**\n         *\n         */\n        onTap(index) {\n            this.activeNode = this.nodes[index];\n            // 当前节点记录是否收起/展开\n            if (void 0 === this.activeNode.collapse) {\n                this.$set(this.activeNode, 'collapse', true);\n            } else {\n                this.activeNode.collapse = !this.activeNode.collapse;\n            }\n            const { x, y, collapse } = this.activeNode;\n            // descendants返回的子节点包含自己, 所以排除自己\n            const [a, ...childNodes] = this.activeNode.descendants();\n            // 根据节点折叠状态来展开/折叠子节点显示\n            childNodes.forEach((node) => {\n                if (collapse) {\n                    const x1 = node.x;\n                    const y1 = node.y;\n                    // 存储展开时候的位置,\n                    // 下次复原位置用\n                    node._x = x1;\n                    node._y = y1;\n                    animate(1, 0, 200, (value, isDone) => {\n                        node.x = x - (x - x1) * value;\n                        node.y = y - (y - y1) * value;\n                        if (isDone) {\n                            node.hidden = true;\n                        }\n                        this.updateLinks();\n                    });\n                } else {\n                    node.hidden = false;\n                    // 此处让value从0 - 1在200ms内不停变化\n                    // 从而让节点位置变化实现展开收缩动画\n                    animate(0, 1, 200, (value) => {\n                        node.x = x + (node._x - x) * value;\n                        node.y = y + (node._y - y) * value;\n                        this.updateLinks();\n                    });\n                }\n            });\n\n            // this.updateNodes();\n            // this.updateLinks();\n        }\n    }\n};\n</script>\n\n<style scope lang=\"scss\">\nheader {\n    position: sticky;\n    width: 100%;\n    top: 0;\n    left: 0;\n    padding: 16px;\n    box-shadow:1px 2px 8px rgba(0,0,0,.1);\n    a {\n        color: #69c;\n    }\n}\n.line {\n    fill: none;\n    stroke: rgb(3, 159, 107);\n    stroke-width: 1;\n}\n.circle {\n    fill: rgb(3, 159, 107);\n}\n\n.text {\n    background-color: rgb(3, 159, 107);\n    margin: 8px;\n    width: 90%;\n    padding: 8px;\n    text-align: center;\n    color: #fff;\n    box-shadow: 1px 2px 8px rgba(4, 108, 73, 0.5);\n    border-radius: 4px;\n    cursor: pointer;\n}\n\nforeignObject.at-panmove .text {\n    cursor: move;\n\n    background-color: rgb(3, 159, 107, 0.7);\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Topology.vue?vue&type=template&id=bd621ac8&\"\nimport script from \"./Topology.vue?vue&type=script&lang=js&\"\nexport * from \"./Topology.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Topology.vue?vue&type=style&index=0&scope=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}